# 開発フロー

**すべてのパッケージ管理とスクリプト実行コマンドには、`npm`、`npx`、`yarn`の代わりに常に`bun`と`bunx`を使用すること。**

# 1.変更を加える

bun run ui:add <ComponentName> # shadcnのコンポーネントをコードベースに追加

# 2.型チェック

bun run typecheck

# 3.テスト実行

bun run test

# 4.ブラウザ動作確認（探索的テスト）

自動テストで検出しにくい問題を発見するため、変更箇所に関連する画面をブラウザで確認する。

## 開発サーバーの起動

### 1. 起動状態の確認

`lsof -i :5173` でポート5173が使用中か確認する。

### 2. 未起動の場合はバックグラウンドで起動

`bun run dev` をBashツールの `run_in_background` オプションで実行する。

### 3. 準備完了の確認

`curl -s -o /dev/null -w '%{http_code}' http://localhost:5173` を実行し、HTTPステータスコード200が返ることを確認する。
起動直後はサーバーの準備が完了していない場合があるため、200が返るまで数秒待って再試行する。

## チェックリスト

- [ ] **表示確認**: 変更に関連するページが正しく表示されること（スクリーンショットで目視確認）
- [ ] **操作確認**: ボタンクリック・フォーム入力・画面遷移など、ユーザー操作が期待通り動作すること
- [ ] **コンソール確認**: ブラウザコンソールにエラーや警告が出力されていないこと
- [ ] **ネットワーク確認**: APIリクエストが正常に完了し、期待するレスポンスが返ること

バグを発見した場合はその場で修正し、ステップ2（型チェック）から再実行する。

# 5.コミット前

bun run lint

# 6.PR作成前

bun run lint && bun run test
